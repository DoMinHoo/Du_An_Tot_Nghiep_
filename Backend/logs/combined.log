{"code":20,"codeName":"IllegalOperation","errorLabelSet":{},"errorResponse":{"code":20,"codeName":"IllegalOperation","errmsg":"Transaction numbers are only allowed on a replica set member or mongos","ok":0},"level":"error","message":"Lỗi hợp nhất giỏ hàng cho userId: 6848e6354b689f0a38a8ede7, guestId: 103cdf2b-381a-4857-8f01-c48dae681bc5 Transaction numbers are only allowed on a replica set member or mongos","ok":0,"stack":"MongoServerError: Transaction numbers are only allowed on a replica set member or mongos\n    at Connection.sendCommand (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:299:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Connection.command (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cmap\\connection.js:327:26)\n    at async Server.command (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\sdam\\server.js:168:29)\n    at async FindOperation.execute (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\find.js:36:16)\n    at async tryOperation (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)","timestamp":"2025-06-18 11:19:53"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:26:16"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 103cdf2b-381a-4857-8f01-c48dae681bc5 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:26:16"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:42:14"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: e88a826f-9de2-4b72-98f9-1ec1c0f34ea1 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:42:14"}
{"level":"info","message":"Giới hạn số lượng biến thể 6847f2d423e3679ec84a788c ở mức tồn kho: 8 cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:43:44"}
{"level":"info","message":"Hợp nhất 0 mặt hàng thành công từ guestId: 49e09513-48eb-42fe-9bd1-57c377eb96d4 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 11:43:44"}
{"level":"warn","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã tồn tại và có sản phẩm","timestamp":"2025-06-18 11:48:00"}
{"level":"error","message":"Lỗi đăng nhập: Cart is not defined","stack":"ReferenceError: Cart is not defined\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:98:26)","timestamp":"2025-06-18 11:54:06"}
{"level":"error","message":"Lỗi đăng nhập: Cart is not defined","stack":"ReferenceError: Cart is not defined\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:98:26)","timestamp":"2025-06-18 11:54:15"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:55:48"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:55:56"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:35"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:44"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:46"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 11:56:49"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 12:00:55"}
{"level":"error","message":"Lỗi đăng nhập: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:123:39)","timestamp":"2025-06-18 12:01:40"}
{"level":"error","message":"Lỗi đăng nhập: Cannot read properties of undefined (reading 'name')","stack":"TypeError: Cannot read properties of undefined (reading 'name')\n    at exports.login (C:\\Du-an-tot-nghiep3\\Du_An_Tot_Nghiep_\\Backend\\src\\controllers\\auth.controller.js:123:39)","timestamp":"2025-06-18 12:01:59"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:34"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:38"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:41"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:52"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:43:56"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:17"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:29"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:33"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:44:49"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:49:07"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:49:14"}
{"level":"warn","message":"Đăng nhập thất bại: Giỏ hàng của userId 6848e6354b689f0a38a8ede7 đã chứa sản phẩm","timestamp":"2025-06-18 19:51:18"}
{"level":"info","message":"Giỏ hàng người dùng với userId: 6848e6354b689f0a38a8ede7 đã chứa sản phẩm, xóa guestCart: 46566d3c-0eab-40f6-b4e2-19d598473194","timestamp":"2025-06-18 19:54:23"}
{"level":"info","message":"Tạo giỏ hàng mới cho userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 19:55:33"}
{"level":"info","message":"Hợp nhất 1 mặt hàng thành công từ guestId: 5f90170f-cdf6-4f06-ba97-66864904f4e6 sang userId: 6848e6354b689f0a38a8ede7","timestamp":"2025-06-18 19:55:33"}
{"level":"info","message":"Không tìm thấy giỏ hàng khách với guestId: e0895b7b-c183-4e84-9032-134e9708011b hoặc giỏ hàng rỗng","timestamp":"2025-06-19 17:09:40"}
